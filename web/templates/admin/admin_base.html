{% extends 'base.html' %}

{% block head_extra %}
  {{ super() }}
  <!-- CSS Custom -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
  <!-- CSS de Bootstrap Table -->
  <link 
    rel="stylesheet" 
    href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"
  >
  <!-- Bootstrap Table Filter Control CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/bootstrap-table@1.22.1/dist/extensions/filter-control/bootstrap-table-filter-control.css"
  >
{% endblock %}


{% block content %}
<div class="container-fluid">
  <div class="row">

    <!-- Sidebar de administración -->
    <nav class="col-md-2 d-none d-md-block bg-light sidebar">
      <div class="sidebar-sticky pt-3">
        <h6 class="sidebar-heading px-3 mb-1 text-muted">
          {{ _('Administración') }}
        </h6>
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('admin.list_users') }}">
              <i class="fas fa-users me-1"></i> {{ _('Personas Usuarias') }}
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('admin.list_roles') }}">
              <i class="fas fa-user-tag me-1"></i> {{ _('Roles') }}
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('admin.list_permissions') }}">
              <i class="fas fa-key me-1"></i> {{ _('Permisos') }}
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Contenido principal del admin -->
    <main role="main" class="col-md-9 ms-sm-auto col-lg-10 px-4">
      {% block admin_content %}
      <!-- Aquí irá el contenido de cada página del admin -->
      {% endblock %}
    </main>

  </div>
</div>
{% endblock %}

{% block scripts_extra %}
  {{ super() }}
  <!-- 1) jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- 2) Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- 3) Bootstrap Table core -->
  <script src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script>
  <!-- 4) Filter Control extension -->
  <script src="https://unpkg.com/bootstrap-table@1.22.1/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
  <!-- 5) Inicializador global: arranca Boot-strap Table en todas las tablas con data-toggle="table" -->
  <script>
    $(function(){
      $('[data-toggle="table"]').bootstrapTable();
    });
  </script>
{% endblock %}
