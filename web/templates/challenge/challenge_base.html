{% extends "base.html" %}

{% block title %}{{ _('Desafío IRIS') }} - {{ self.title() }}{% endblock %}

{% block content %}
<!-- Encabezado minimalista del desafío -->
<section class="challenge-hero">
    <div class="container text-center py-4">
        <h1 class="fw-bold mb-2"><i class="fas fa-trophy me-2"></i>{{ _('Desafío de Análisis IRIS') }}</h1>
        <p class="text-muted mb-3">{{ _('¿Puedes analizar sesgos de género mejor que la Inteligencia Artificial?') }}</p>
        <div>
            <span class="badge bg-warning text-dark px-3 py-2">
                <i class="fas fa-calendar-alt me-2"></i>{{ _('Semana de la Ciencia 2025') }}
            </span>
        </div>
        <div class="challenge-mini-nav mt-4">
            <a class="mini-link {% if request.endpoint == 'challenge.challenge_home' %}active{% endif %}" href="{{ url_for('challenge.challenge_home') }}">{{ _('Inicio') }}</a>
            <span class="mx-2 text-secondary">•</span>
            <a class="mini-link {% if request.endpoint == 'challenge.results' %}active{% endif %}" href="{{ url_for('challenge.results') }}">{{ _('Resultados') }}</a>
        </div>
    </div>
</section>

<!-- Contenido principal -->
<main>
    {% block challenge_content %}{% endblock %}
    
    <footer class="challenge-footer text-center text-muted small py-4">
        <div class="container">IRIS · {{ _('Desafío temporal para participantes autorizados') }}</div>
    </footer>
</main>

<style>
.challenge-hero {
    /* Gradient base + soft decorative blobs */
    background:
        radial-gradient(1200px 400px at -10% -50%, rgba(102, 126, 234, 0.18) 0%, rgba(102, 126, 234, 0) 60%),
        radial-gradient(800px 300px at 110% -20%, rgba(255, 193, 7, 0.18) 0%, rgba(255, 193, 7, 0) 60%),
        linear-gradient(135deg, #eef2ff 0%, #f8f9ff 100%);
    border-bottom: 1px solid #e9ecef;
}
.challenge-mini-nav .mini-link {
    text-decoration: none;
    color: #6c757d;
    font-weight: 500;
}
.challenge-mini-nav .mini-link.active,
.challenge-mini-nav .mini-link:hover {
    color: #0d6efd;
}
.challenge-footer {
    border-top: 1px solid #e9ecef;
}
@media (max-width: 768px) {
    .challenge-mini-nav .mx-2 { display: none; }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const currentUser = {{ current_user | tojson | safe }};
    const userRoles = currentUser ? (currentUser.roles || []) : [];
    if (!userRoles.includes('admin') && !userRoles.includes('challenge')) {
        window.location.href = "{{ url_for('home') }}";
    }
});
</script>
{% endblock %}
